{"mappings":"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","sources":["src/js/index.js","src/js/constants.js","src/js/services/storage.js","src/js/utils/debounce.js","src/js/utils/log.js","src/js/utils/isDialogElementSupported.js","src/js/helpers/renderSupportedFormats.js","src/js/helpers/history.js","src/js/helpers/results.js","src/js/helpers/triggerScanEffects.js","src/js/utils/beep.js","src/js/utils/vibrate.js","src/js/helpers/resizeScanFrame.js","src/js/helpers/BarcodeReader.js","src/js/helpers/initializeSettingsForm.js","src/js/helpers/toggleTorchButtonStatus.js","src/js/components/video-capture.js","src/js/utils/clamp.js","src/js/components/clipboard-copy.js","src/js/components/scan-result.js"],"sourcesContent":["import '@georapbox/a-tab-group/dist/a-tab-group.js';\nimport '@georapbox/web-share-element/dist/web-share-defined.js';\nimport '@georapbox/files-dropzone-element/dist/files-dropzone-defined.js';\nimport '@georapbox/resize-observer-element/dist/resize-observer-defined.js';\nimport '@georapbox/modal-element/dist/modal-element-defined.js';\nimport { NO_BARCODE_DETECTED, ACCEPTED_MIME_TYPES } from './constants.js';\nimport { getHistory, setSettings } from './services/storage.js';\nimport { debounce } from './utils/debounce.js';\nimport { log } from './utils/log.js';\nimport { isDialogElementSupported } from './utils/isDialogElementSupported.js';\nimport { renderSupportedFormats } from './helpers/renderSupportedFormats.js';\nimport {\n  addToHistory,\n  removeFromHistory,\n  emptyHistory,\n  renderHistoryList\n} from './helpers/history.js';\nimport { hideResult, showResult } from './helpers/results.js';\nimport { triggerScanEffects } from './helpers/triggerScanEffects.js';\nimport { resizeScanFrame } from './helpers/resizeScanFrame.js';\nimport { BarcodeReader } from './helpers/BarcodeReader.js';\nimport { initializeSettingsForm } from './helpers/initializeSettingsForm.js';\nimport { toggleTorchButtonStatus } from './helpers/toggleTorchButtonStatus.js';\nimport { VideoCapture } from './components/video-capture.js';\nimport './components/clipboard-copy.js';\nimport './components/scan-result.js';\n\n(async function () {\n  const tabGroupEl = document.querySelector('a-tab-group');\n  const videoCaptureEl = document.querySelector('video-capture');\n  const cameraPanel = document.getElementById('cameraPanel');\n  const filePanel = document.getElementById('filePanel');\n  const scanInstructionsEl = document.getElementById('scanInstructions');\n  const scanBtn = document.getElementById('scanBtn');\n  const dropzoneEl = document.getElementById('dropzone');\n  const resizeObserverEl = document.querySelector('resize-observer');\n  const scanFrameEl = document.getElementById('scanFrame');\n  const torchButton = document.getElementById('torchButton');\n  const globalActionsEl = document.getElementById('globalActions');\n  const historyBtn = document.getElementById('historyBtn');\n  const historyDialog = document.getElementById('historyDialog');\n  const settingsBtn = document.getElementById('settingsBtn');\n  const settingsDialog = document.getElementById('settingsDialog');\n  const settingsForm = document.forms['settings-form'];\n  const cameraSelect = document.getElementById('cameraSelect');\n  let shouldScan = true;\n  let rafId;\n\n  // By default the dialog elements are hidden for browsers that don't support the dialog element.\n  // If the dialog element is supported, we remove the hidden attribute and the dialogs' visibility\n  // is controlled by using the `showModal()` and `close()` methods.\n  if (isDialogElementSupported()) {\n    globalActionsEl?.removeAttribute('hidden');\n    historyDialog?.removeAttribute('hidden');\n    settingsDialog?.removeAttribute('hidden');\n  }\n\n  const { barcodeReader, barcodeFormats, barcodeReaderError } = await BarcodeReader.init();\n\n  if (barcodeReaderError) {\n    const alertEl = document.getElementById('barcodeReaderError');\n\n    shouldScan = false;\n    globalActionsEl?.setAttribute('hidden', '');\n    tabGroupEl?.setAttribute('hidden', '');\n    alertEl?.removeAttribute('hidden');\n    alertEl.textContent = barcodeReaderError?.message;\n    return; // Stop the script execution as BarcodeDetector API is not supported.\n  }\n\n  videoCaptureEl.addEventListener('video-capture:video-play', handleVideoCapturePlay, {\n    once: true\n  });\n\n  videoCaptureEl.addEventListener('video-capture:error', handleVideoCaptureError, {\n    once: true\n  });\n\n  VideoCapture.defineCustomElement();\n\n  const videoCaptureShadowRoot = videoCaptureEl?.shadowRoot;\n  const videoCaptureVideoEl = videoCaptureShadowRoot?.querySelector('video');\n  const videoCaptureActionsEl = videoCaptureShadowRoot?.querySelector('[part=\"actions-container\"]');\n\n  dropzoneEl.accept = ACCEPTED_MIME_TYPES.join(',');\n  initializeSettingsForm(settingsForm);\n  renderSupportedFormats(barcodeFormats);\n  renderHistoryList((await getHistory())[1] || []);\n\n  /**\n   * Scans for barcodes.\n   * If a barcode is detected, it stops scanning and displays the result.\n   *\n   * @returns {Promise<void>} - A Promise that resolves when the barcode is detected.\n   */\n  async function scan() {\n    log('Scanning...');\n\n    scanInstructionsEl?.removeAttribute('hidden');\n\n    try {\n      const barcode = await barcodeReader.detect(videoCaptureVideoEl);\n      const barcodeValue = barcode?.rawValue ?? '';\n\n      if (!barcodeValue) {\n        throw new Error(NO_BARCODE_DETECTED);\n      }\n\n      window.cancelAnimationFrame(rafId);\n      showResult(cameraPanel, barcodeValue);\n      addToHistory(barcodeValue);\n      scanInstructionsEl?.setAttribute('hidden', '');\n      scanBtn?.removeAttribute('hidden');\n      scanFrameEl?.setAttribute('hidden', '');\n      videoCaptureActionsEl?.setAttribute('hidden', '');\n      triggerScanEffects();\n      return;\n    } catch {\n      // If no barcode is detected, the error is caught here.\n      // We can ignore the error and continue scanning.\n    }\n\n    if (shouldScan) {\n      rafId = window.requestAnimationFrame(() => scan());\n    }\n  }\n\n  /**\n   * Handles the click event on the scan button.\n   * It is responsible for clearing previous results and starting the scan process again.\n   */\n  function handleScanButtonClick() {\n    scanBtn?.setAttribute('hidden', '');\n    scanFrameEl?.removeAttribute('hidden');\n    videoCaptureActionsEl?.removeAttribute('hidden');\n    hideResult(cameraPanel);\n    scan();\n  }\n\n  /**\n   * Handles the tab show event.\n   * It is responsible for starting or stopping the scan process based on the selected tab.\n   *\n   * @param {CustomEvent} evt - The event object.\n   */\n  function handleTabShow(evt) {\n    const tabId = evt.detail.tabId;\n    const videoCaptureEl = document.querySelector('video-capture'); // Get the latest instance of video-capture element to ensure we don't use the cached one.\n\n    if (tabId === 'cameraTab') {\n      shouldScan = true;\n\n      if (!videoCaptureEl) {\n        return;\n      }\n\n      const hasResult = cameraPanel.querySelector('scan-result') != null;\n\n      if (!videoCaptureEl.loading && !hasResult) {\n        scanFrameEl?.removeAttribute('hidden');\n        videoCaptureActionsEl?.removeAttribute('hidden');\n        scan();\n      }\n\n      if (typeof videoCaptureEl.startVideoStream === 'function') {\n        const videoDeviceId = cameraSelect?.value || undefined;\n        videoCaptureEl.startVideoStream(videoDeviceId);\n      }\n    } else if (tabId === 'fileTab') {\n      shouldScan = false;\n\n      if (videoCaptureEl != null && typeof videoCaptureEl.stopVideoStream === 'function') {\n        videoCaptureEl.stopVideoStream();\n      }\n\n      scanFrameEl?.setAttribute('hidden', '');\n      videoCaptureActionsEl?.setAttribute('hidden', '');\n    }\n  }\n\n  /**\n   * Handles the selection of a file.\n   * It is responsible for displaying the selected file in the dropzone.\n   *\n   * @param {File} file - The selected file.\n   */\n  function handleFileSelect(file) {\n    if (!file) {\n      return;\n    }\n\n    const image = new Image();\n    const reader = new FileReader();\n\n    reader.onload = evt => {\n      const data = evt.target.result;\n\n      image.onload = async () => {\n        try {\n          const barcode = await barcodeReader.detect(image);\n          const barcodeValue = barcode?.rawValue ?? '';\n\n          if (!barcodeValue) {\n            throw new Error(NO_BARCODE_DETECTED);\n          }\n\n          showResult(filePanel, barcodeValue);\n          addToHistory(barcodeValue);\n          triggerScanEffects();\n        } catch (err) {\n          log(err);\n          showResult(filePanel, NO_BARCODE_DETECTED);\n          triggerScanEffects({ success: false });\n        }\n      };\n\n      image.src = data;\n      image.alt = 'Image preview';\n\n      dropzoneEl.replaceChildren();\n\n      const preview = document.createElement('div');\n      preview.className = 'dropzone-preview';\n      preview.setAttribute('aria-hidden', 'true');\n\n      const imageWrapper = document.createElement('div');\n      imageWrapper.className = 'dropzone-preview__image-wrapper';\n\n      const fileNameWrapper = document.createElement('div');\n      fileNameWrapper.className = 'dropzone-preview__file-name';\n      fileNameWrapper.textContent = file.name;\n\n      imageWrapper.appendChild(image);\n      preview.appendChild(imageWrapper);\n      preview.appendChild(fileNameWrapper);\n      dropzoneEl.prepend(preview);\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  /**\n   * Handles the drop event on the dropzone.\n   *\n   * @param {CustomEvent} evt - The event object.\n   */\n  function handleFileDrop(evt) {\n    const file = evt.detail.acceptedFiles[0];\n    handleFileSelect(file);\n  }\n\n  /**\n   * Handles the resize event on the video-capture element.\n   * It is responsible for resizing the scan frame based on the video element.\n   */\n  function handleVideoCaptureResize() {\n    resizeScanFrame(videoCaptureEl.shadowRoot.querySelector('video'), scanFrameEl);\n  }\n\n  /**\n   * Handles the video play event on the video-capture element.\n   * It is responsible for displaying the scan frame and starting the scan process.\n   * It also handles the zoom controls if the browser supports it.\n   *\n   * @param {CustomEvent} evt - The event object.\n   */\n  async function handleVideoCapturePlay(evt) {\n    scanFrameEl?.removeAttribute('hidden');\n    resizeScanFrame(evt.detail.video, scanFrameEl);\n    scan();\n\n    const trackSettings = evt.target.getTrackSettings();\n    const trackCapabilities = evt.target.getTrackCapabilities();\n    const zoomLevelEl = document.getElementById('zoomLevel');\n\n    if (trackCapabilities?.torch) {\n      torchButton?.removeAttribute('hidden');\n\n      if (videoCaptureEl.hasAttribute('torch')) {\n        toggleTorchButtonStatus({ el: torchButton, isTorchOn: true });\n      }\n    }\n\n    if (trackSettings?.zoom && trackCapabilities?.zoom) {\n      const zoomControls = document.getElementById('zoomControls');\n      const minZoom = trackCapabilities?.zoom?.min || 0;\n      const maxZoom = trackCapabilities?.zoom?.max || 10;\n      let currentZoom = trackSettings?.zoom || 1;\n\n      zoomControls?.removeAttribute('hidden');\n      zoomLevelEl.textContent = currentZoom;\n\n      const handleZoomControlsClick = evt => {\n        const zoomInBtn = evt.target.closest('[data-action=\"zoom-in\"]');\n        const zoomOutBtn = evt.target.closest('[data-action=\"zoom-out\"]');\n\n        if (zoomInBtn && currentZoom < maxZoom) {\n          currentZoom += 0.5;\n        }\n\n        if (zoomOutBtn && currentZoom > minZoom) {\n          currentZoom -= 0.5;\n        }\n\n        zoomLevelEl.textContent = currentZoom;\n        videoCaptureEl.zoom = currentZoom;\n      };\n\n      zoomControls.addEventListener('click', handleZoomControlsClick);\n    }\n\n    const videoInputDevices = await VideoCapture.getVideoInputDevices();\n\n    videoInputDevices.forEach((device, index) => {\n      const option = document.createElement('option');\n      option.value = device.deviceId;\n      option.textContent = device.label || `Camera ${index + 1}`;\n      cameraSelect.appendChild(option);\n    });\n\n    if (videoInputDevices.length > 1) {\n      cameraSelect?.removeAttribute('hidden');\n    }\n  }\n\n  /**\n   * Handles the error event on the video-capture element.\n   * It is responsible for displaying an error message if the camera cannot be accessed or permission is denied.\n   *\n   * @param {CustomEvent} evt - The event object.\n   */\n  function handleVideoCaptureError(evt) {\n    const error = evt.detail.error;\n\n    if (error.name === 'NotFoundError') {\n      // If the browser cannot find all media tracks with the specified types that meet the constraints given.\n      return;\n    }\n\n    const errorMessage =\n      error.name === 'NotAllowedError'\n        ? 'Permission to use webcam was denied or video Autoplay is disabled. Reload the page to give appropriate permissions to webcam.'\n        : error.message;\n\n    cameraPanel.innerHTML = /* html */ `<div class=\"alert alert-danger\" role=\"alert\" style=\"margin: 0;\">${errorMessage}</div>`;\n  }\n\n  /**\n   * Handles the settings button click event.\n   * It is responsible for displaying the settings dialog.\n   */\n  function handleSettingsButtonClick() {\n    settingsDialog.open = true;\n  }\n\n  /**\n   * Handles the change event on the settings form.\n   * It is responsible for saving the settings to persistent storage and updating the settings.\n   *\n   * @param {Event} evt - The event object.\n   */\n  function handleSettingsFormChange(evt) {\n    const settings = {};\n    const checkboxes = evt.currentTarget.querySelectorAll('input[type=\"checkbox\"]');\n\n    checkboxes.forEach(item => (settings[item.name] = item.checked));\n    setSettings(settings);\n  }\n\n  /**\n   * Handles the click event on the history button.\n   * It is responsible for displaying the history dialog.\n   */\n  function handleHistoryButtonClick() {\n    historyDialog.open = true;\n  }\n\n  /**\n   * Handles the click event on the history dialog.\n   * It is responsible for closing the dialog, deleting an item from the history, or emptying the history.\n   *\n   * @param {MouseEvent} evt - The event object.\n   */\n  function handleHistoryDialogClick(evt) {\n    const target = evt.target;\n\n    // Handle delete action\n    if (target.closest('[data-action=\"delete\"]')) {\n      const value = target.closest('li').dataset.value;\n\n      if (window.confirm(`Delete history item ${value}?`)) {\n        removeFromHistory(value);\n        return;\n      }\n    }\n\n    // Handle empty history action\n    if (target.closest('#emptyHistoryBtn')) {\n      if (window.confirm('Empty history? This action cannot be undone.')) {\n        emptyHistory();\n        return;\n      }\n    }\n  }\n\n  /**\n   * Handles the click event on the torch button.\n   * It is responsible for toggling the torch on and off.\n   *\n   * @param {MouseEvent} evt - The event object.\n   */\n  function handleTorchButtonClick(evt) {\n    videoCaptureEl.torch = !videoCaptureEl.torch;\n\n    toggleTorchButtonStatus({\n      el: evt.currentTarget,\n      isTorchOn: videoCaptureEl.hasAttribute('torch')\n    });\n  }\n\n  /**\n   * Handles the change event on the camera select element.\n   * It is responsible for restarting the video stream with the selected video input device id.\n   *\n   * @param {Event} evt - The event object.\n   */\n  function handleCameraSelectChange(evt) {\n    if (typeof videoCaptureEl.restartVideoStream !== 'function') {\n      return;\n    }\n\n    const videoDeviceId = evt.target.value || undefined;\n    videoCaptureEl.restartVideoStream(videoDeviceId);\n  }\n\n  /**\n   * Handles the visibility change event on the document.\n   * It is responsible for stopping the scan process when the document is not visible.\n   */\n  function handleDocumentVisibilityChange() {\n    const selectedTab = tabGroupEl.querySelector('[selected]');\n    const tabId = selectedTab.getAttribute('id');\n\n    if (tabId !== 'cameraTab') {\n      return;\n    }\n\n    if (document.visibilityState === 'hidden') {\n      shouldScan = false;\n\n      if (videoCaptureEl != null && typeof videoCaptureEl.stopVideoStream === 'function') {\n        videoCaptureEl.stopVideoStream();\n      }\n    } else {\n      shouldScan = true;\n\n      // Get the latest instance of video-capture element to ensure we don't use the cached one.\n      const videoCaptureEl = document.querySelector('video-capture');\n\n      if (!videoCaptureEl) {\n        return;\n      }\n\n      if (!videoCaptureEl.loading && !cameraPanel.querySelector('scan-result')) {\n        scan();\n      }\n\n      if (typeof videoCaptureEl.startVideoStream === 'function') {\n        const videoDeviceId = cameraSelect?.value || undefined;\n        videoCaptureEl.startVideoStream(videoDeviceId);\n      }\n    }\n  }\n\n  /**\n   * Handles the escape key press event on the document.\n   * It is responsible for triggering the scan button click event if there is already a barcode detected.\n   */\n  function handleDocumentEscapeKey() {\n    const cameraTabSelected = tabGroupEl.querySelector('#cameraTab').hasAttribute('selected');\n    const scanBtnVisible = !scanBtn.hidden;\n    const settingsDialogOpen = settingsDialog.hasAttribute('open');\n    const historyDialogOpen = historyDialog.hasAttribute('open');\n    const anyDialogOpen = settingsDialogOpen || historyDialogOpen;\n\n    if (!scanBtnVisible || !cameraTabSelected || anyDialogOpen) {\n      return;\n    }\n\n    scanBtn.click();\n  }\n\n  /**\n   * Handles the key down event on the document.\n   */\n  function handleDocumentKeyDown(evt) {\n    if (evt.key === 'Escape') {\n      handleDocumentEscapeKey();\n    }\n  }\n\n  scanBtn.addEventListener('click', handleScanButtonClick);\n  tabGroupEl.addEventListener('a-tab-show', debounce(handleTabShow, 250));\n  dropzoneEl.addEventListener('files-dropzone-drop', handleFileDrop);\n  resizeObserverEl.addEventListener('resize-observer:resize', handleVideoCaptureResize);\n  settingsBtn.addEventListener('click', handleSettingsButtonClick);\n  settingsForm.addEventListener('change', handleSettingsFormChange);\n  historyBtn.addEventListener('click', handleHistoryButtonClick);\n  historyDialog.addEventListener('click', handleHistoryDialogClick);\n  torchButton.addEventListener('click', handleTorchButtonClick);\n  cameraSelect.addEventListener('change', handleCameraSelectChange);\n  document.addEventListener('visibilitychange', handleDocumentVisibilityChange);\n  document.addEventListener('keydown', handleDocumentKeyDown);\n})();\n","export const EXPERIMENTAL_FLAG = 'experimental';\n\nexport const NO_BARCODE_DETECTED = 'No barcode detected';\n\nexport const ACCEPTED_MIME_TYPES = [\n  'image/jpg',\n  'image/jpeg',\n  'image/png',\n  'image/apng',\n  'image/gif',\n  'image/webp',\n  'image/avif'\n];\n","import { set, get } from 'idb-keyval';\n\nconst STORAGE_PREFIX = 'barcode-scanner/';\nconst SETTINGS_STORAGE_KEY = 'settings';\nconst HISTORY_STORAGE_KEY = 'history';\n\n/**\n * Gets an item from the storage.\n *\n * @param {string} key - The key to get the item from.\n * @returns {Promise<[ error: any, value: any ]>} The item and an error if occurred.\n */\nconst getItem = async key => {\n  try {\n    return [null, await get(key)];\n  } catch (error) {\n    return [error, void 0];\n  }\n};\n\n/**\n * Sets an item in the storage.\n *\n * @param {string} key - The key to set the item to.\n * @param {any} data - The data to set.\n * @returns {Promise<[ error: any ]>} An error if occurred.\n */\nconst setItem = async (key, data) => {\n  try {\n    await set(key, data);\n\n    return [null];\n  } catch (error) {\n    return [error];\n  }\n};\n\n/**\n * Gets the settings from the storage.\n *\n * @returns {Promise<[ error: any, value: any ]>} The settings and an error if occurred.\n */\nexport const getSettings = async () => {\n  return getItem(STORAGE_PREFIX + SETTINGS_STORAGE_KEY);\n};\n\n/**\n * Sets the settings in the storage.\n *\n * @param {any} data - The settings to set.\n * @returns {Promise<[ error: any ]>} An error if occurred.\n */\nexport const setSettings = async data => {\n  return setItem(STORAGE_PREFIX + SETTINGS_STORAGE_KEY, data);\n};\n\n/**\n * Gets the history from the storage.\n *\n * @returns {Promise<[ error: any, value: any ]>} The history and an error if occurred.\n */\nexport const getHistory = async () => {\n  return getItem(STORAGE_PREFIX + HISTORY_STORAGE_KEY);\n};\n\n/**\n * Sets the history in the storage.\n *\n * @param {any} data - The history to set.\n * @returns {Promise<[ error: any ]>} An error if occurred.\n */\nexport const setHistory = async data => {\n  return setItem(STORAGE_PREFIX + HISTORY_STORAGE_KEY, data);\n};\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * 'n' milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @param {function} fn The function to be executed.\n * @param {Number} [wait=0] Time of delay in milliseconds. It is required if `immediate` is used.\n * @param {Boolean} [immediate=false] If true or any truthy value, triggers the function on the leading edge.\n * @throws {TypeError} If `fn` is not function.\n * @returns {function} A new debounced function.\n * @example\n *\n * const debouncedHandler = debounce(() => {\n *   // Do your thing here...\n * }, 250);\n *\n * window.addEventListener('resize', debouncedHandler, false);\n */\nconst debounce = (fn, wait = 0, immediate = false) => {\n  let timerId = null;\n\n  if (typeof fn !== 'function') {\n    throw new TypeError('Expected a function for first argument');\n  }\n\n  return (...args) => {\n    clearTimeout(timerId);\n\n    if (immediate && !timerId) {\n      fn(...args);\n    }\n\n    timerId = setTimeout(() => {\n      timerId = null;\n      if (!immediate) {\n        fn(...args);\n      }\n    }, wait);\n  };\n};\n\nexport { debounce };\n","/**\n * Log to console only in development mode.\n *\n * @param {...any} args - Arguments to log\n */\nexport function log(...args) {\n  process.env.NODE_ENV === 'development' && console.log(...args);\n}\n","/**\n * Check if the dialog element is supported.\n *\n * @returns {boolean} - Returns true if the dialog element is supported.\n */\nexport const isDialogElementSupported = () => {\n  return typeof HTMLDialogElement === 'function';\n};\n","/**\n * Renders the supported formats.\n *\n * @param {Array<string>} formats - Supported barcode formats\n */\nexport function renderSupportedFormats(formats) {\n  if (!Array.isArray(formats) || formats.length === 0) {\n    return;\n  }\n\n  const supportedFormatsEl = document.getElementById('supportedFormats');\n\n  if (!supportedFormatsEl) {\n    return;\n  }\n\n  supportedFormatsEl.textContent = `Supported formats: ${formats.join(', ')}`;\n}\n","import { getHistory, setHistory, getSettings } from '../services/storage.js';\n\n/**\n * Renders the history list. If there are no items in history, it will show a message.\n *\n * @param {Array<string>} data - Hidsoty data as an array of strings\n */\nexport function renderHistoryList(data) {\n  const historyList = document.getElementById('historyList');\n\n  if (!historyList) {\n    return;\n  }\n\n  const emptyHistoryBtn = document.getElementById('emptyHistoryBtn');\n\n  historyList.replaceChildren();\n\n  if (!Array.isArray(data) || data.length === 0) {\n    historyList.innerHTML = '<li>There are no saved items in history.</li>';\n    emptyHistoryBtn.hidden = true;\n  } else {\n    emptyHistoryBtn.hidden = false;\n\n    data.forEach((item, index) => {\n      const li = document.createElement('li');\n      li.setAttribute('data-value', item);\n\n      let historyItem;\n\n      try {\n        new URL(item);\n        historyItem = document.createElement('a');\n        historyItem.href = item;\n        historyItem.setAttribute('target', '_blank');\n        historyItem.setAttribute('rel', 'noreferrer noopener');\n      } catch {\n        historyItem = document.createElement('span');\n      }\n\n      historyItem.textContent = item;\n      historyItem.setAttribute('id', `historyItem-${index}`);\n\n      const actionsEl = document.createElement('div');\n      actionsEl.className = 'history-modal__actions';\n\n      const copyBtn = document.createElement('custom-clipboard-copy');\n      copyBtn.setAttribute('id', `copyHistoryItem-${index}`);\n      copyBtn.setAttribute('aria-label', 'Copy to clipboard');\n      copyBtn.setAttribute('aria-labelledby', `copyHistoryItem-${index} historyItem-${index}`);\n      copyBtn.setAttribute('only-icon', '');\n      copyBtn.setAttribute('value', item);\n      actionsEl.appendChild(copyBtn);\n\n      const removeBtn = document.createElement('button');\n      removeBtn.type = 'button';\n      removeBtn.className = 'history-modal__delete-action';\n      removeBtn.setAttribute('data-action', 'delete');\n      removeBtn.setAttribute('id', `removeHistoryItem-${index}`);\n      removeBtn.setAttribute('aria-label', 'Remove from history');\n      removeBtn.setAttribute('aria-labelledby', `removeHistoryItem-${index} historyItem-${index}`);\n      removeBtn.innerHTML = /* html */ `\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n            <path d=\"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z\"/>\n          </svg>\n        `;\n      actionsEl.appendChild(removeBtn);\n\n      li.appendChild(historyItem);\n      li.appendChild(actionsEl);\n      historyList.appendChild(li);\n    });\n  }\n}\n\n/**\n * Adds an item to the history.\n * If the item is already in history, it will not be added.\n *\n * @param {string} item - Item to add to history\n */\nexport async function addToHistory(item) {\n  const [, settings] = await getSettings();\n\n  if (!item || !settings?.addToHistory) {\n    return;\n  }\n\n  const [getHistoryError, history = []] = await getHistory();\n\n  if (!getHistoryError && Array.isArray(history) && !history.find(h => h === item)) {\n    const data = [...history, item];\n\n    const [setHistoryError] = await setHistory(data);\n\n    if (!setHistoryError) {\n      renderHistoryList(data);\n    }\n  }\n}\n\n/**\n * Removes an item from the history.\n *\n * @param {string} item - Item to remove from history\n */\nexport async function removeFromHistory(item) {\n  if (!item) {\n    return;\n  }\n\n  const [getHistoryError, history = []] = await getHistory();\n\n  if (!getHistoryError && Array.isArray(history)) {\n    const data = history.filter(el => el !== item);\n    const [setHistoryError] = await setHistory(data);\n\n    if (!setHistoryError) {\n      renderHistoryList(data);\n    }\n  }\n}\n\n/**\n * Removes all items from the history.\n */\nexport async function emptyHistory() {\n  const [setHistoryError] = await setHistory([]);\n\n  if (!setHistoryError) {\n    renderHistoryList([]);\n  }\n}\n","/**\n * Removes the scanned result from the element where it is shown.\n *\n * @param {HTMLElement} element - The element to remove the result from.\n */\nexport function hideResult(element) {\n  if (!element) {\n    return;\n  }\n\n  const scanResultEl = element.querySelector('scan-result');\n  scanResultEl?.remove();\n}\n\n/**\n * Creates and shows the scanned result inside the given element.\n *\n * @param {HTMLElement} element - The element to show the result in.\n * @param {string} value - The value to create the result with.\n */\nexport async function showResult(element, value) {\n  if (!element || !value) {\n    return;\n  }\n\n  const oldScanResultEl = element.querySelector('scan-result');\n\n  if (oldScanResultEl) {\n    oldScanResultEl.setAttribute('value', value);\n  } else {\n    const newScanResultEl = document.createElement('scan-result');\n    newScanResultEl.setAttribute('value', value);\n    newScanResultEl.setAttribute('role', 'alert');\n    newScanResultEl.setAttribute('aria-live', 'assertive');\n    newScanResultEl.setAttribute('aria-atomic', 'true');\n    element.appendChild(newScanResultEl);\n  }\n}\n","import { getSettings } from '../services/storage.js';\nimport { beep } from '../utils/beep.js';\nimport { vibrate } from '../utils/vibrate.js';\n\n/**\n * Triggers the scan effects like beep and vibrate.\n *\n * @param {Object} options\n * @param {boolean} [options.success=true] - Whether to trigger the success or error effects.\n */\nexport async function triggerScanEffects(options = {}) {\n  const { success = true } = options;\n  const [, settings] = await getSettings();\n\n  if (!settings) {\n    return;\n  }\n\n  const beepConfig = success\n    ? { duration: 200, frequency: 860, volume: 0.03, type: 'square' }\n    : { duration: 300, frequency: 200, volume: 0.05, type: 'sawtooth' };\n\n  settings.beep && beep(beepConfig);\n  settings.vibrate && vibrate(success ? 100 : 200);\n}\n","/**\n * Beep sound using the `AudioContext` interface.\n *\n * @param {Object} options\n * @param {Number} options.duration - Duration in milliseconds\n * @param {Number} options.frequency - Frequency in Hz\n * @param {Number} options.volume - Volume\n * @param {String} options.type - Type of oscillator\n * @param {Function} options.onEnded - Callback function when the sound ends\n */\nexport const beep = (() => {\n  const audioCtx = new (window.AudioContext || window.webkitAudioContext || window.audioContext)();\n\n  if (!audioCtx) {\n    return;\n  }\n\n  return options => {\n    const { duration, frequency, volume, type, onEnded } = options;\n    const oscillator = audioCtx.createOscillator();\n    const gainNode = audioCtx.createGain();\n\n    oscillator.connect(gainNode);\n    gainNode.connect(audioCtx.destination);\n\n    if (volume) {\n      gainNode.gain.value = volume;\n    }\n\n    if (frequency) {\n      oscillator.frequency.value = frequency;\n    }\n\n    if (type) {\n      oscillator.type = type;\n    }\n\n    if (typeof onEnded === 'function') {\n      oscillator.onended = onEnded;\n    }\n\n    oscillator.start(audioCtx.currentTime);\n    oscillator.stop(audioCtx.currentTime + (duration || 500) / 1000);\n  };\n})();\n","/**\n * Vibrate the device.\n * If the device does not support vibration, this function will fail silently.\n *\n * @param {Number} [duration=0] - Duration in milliseconds\n */\nexport async function vibrate(duration = 0) {\n  if (typeof window.navigator.vibrate !== 'function') {\n    return;\n  }\n\n  try {\n    window.navigator.vibrate(duration);\n  } catch {\n    // Fail silently...\n  }\n}\n","/**\n * Resizes the scan frame to match the video element's dimensions.\n *\n * @param {HTMLVideoElement} videoEl - Video element\n * @param {HTMLElement} scanFrameEl - Scan frame element\n */\nexport function resizeScanFrame(videoEl, scanFrameEl) {\n  if (!videoEl || !scanFrameEl) {\n    return;\n  }\n\n  const rect = videoEl.getBoundingClientRect();\n\n  scanFrameEl.style.cssText = `width: ${rect.width}px; height: ${rect.height}px`;\n}\n","import { log } from '../utils/log.js';\n\n/**\n * BarcodeReader class to detect barcodes from images or videos.\n *\n * @see https://developer.mozilla.org/docs/Web/API/BarcodeDetector\n */\nclass BarcodeReader {\n  static async polyfill() {\n    if (!('BarcodeDetector' in window)) {\n      try {\n        await import('barcode-detector');\n        log('Using BarcodeDetector polyfill.');\n      } catch {\n        throw new Error('BarcodeDetector API is not supported by your browser.');\n      }\n    } else {\n      log('Using the native BarcodeDetector API.');\n    }\n  }\n\n  /**\n   * Get the supported barcode formats.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/BarcodeDetector/getSupportedFormats\n   * @returns {Promise<Array<string>>} - Supported barcode formats\n   */\n  static async getSupportedFormats() {\n    return await window.BarcodeDetector.getSupportedFormats();\n  }\n\n  /**\n   * Create a new BarcodeReader instance.\n   *\n   * @returns {Promise<BarcodeReader>} - New BarcodeReader instance\n   */\n  static async create() {\n    const formats = await window.BarcodeDetector.getSupportedFormats();\n    return new BarcodeReader(formats);\n  }\n\n  /**\n   * Initialize the BarcodeReader.\n   *\n   * @returns {Promise<{ barcodeReader: BarcodeReader, barcodeFormats: Array<string>, barcodeReaderError: Error }>} - BarcodeReader instance, supported formats, and error\n   */\n  static async init() {\n    try {\n      await BarcodeReader.polyfill();\n      const barcodeReader = await BarcodeReader.create();\n      const barcodeFormats = await BarcodeReader.getSupportedFormats();\n      return { barcodeReader, barcodeFormats, barcodeReaderError: null };\n    } catch (error) {\n      return {\n        barcodeReader: null,\n        barcodeFormats: [],\n        barcodeReaderError: error\n      };\n    }\n  }\n\n  /**\n   * Create a new BarcodeReader instance.\n   *\n   * @param {Array<string>} formats - Supported barcode formats\n   */\n  constructor(formats) {\n    this.barcodeReader = new window.BarcodeDetector({ formats });\n  }\n\n  /**\n   * Detect barcodes from the provided source.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/BarcodeDetector/detect\n   * @param {HTMLImageElement|HTMLVideoElement|ImageBitmap} source - Image or video element or ImageBitmap\n   * @returns {Promise<BarcodeDetection>} - Barcode detection result\n   */\n  async detect(source) {\n    if (!this.barcodeReader) {\n      throw new Error('BarcodeReader is not initialized.');\n    }\n\n    const results = await this.barcodeReader.detect(source);\n\n    if (Array.isArray(results) && results.length > 0) {\n      return results[0];\n    } else {\n      throw new Error('Could not detect barcode from provided source.');\n    }\n  }\n}\n\nexport { BarcodeReader };\n","import { getSettings } from '../services/storage.js';\n\n/**\n * Initialize the settings form with the saved settings.\n * If a setting is not found, it will be ignored.\n *\n * @param {HTMLFormElement} form - The settings form to initialize.\n */\nexport async function initializeSettingsForm(form) {\n  const [, settings = {}] = await getSettings();\n\n  Object.entries(settings).forEach(([key, value]) => {\n    const settingInput = form.querySelector(`[name=\"${key}\"]`);\n\n    if (!settingInput) {\n      return;\n    }\n\n    settingInput.checked = value;\n  });\n}\n","/**\n * Toggles the torch button status.\n * The torch button has two icons, one for on and one for off.\n * This function toggles the visibility of the icons based on the torch state and updates the button title.\n *\n * @param {HTMLButtonElement} buttonEl - The torch button element.\n * @param {boolean} isTorchOn - The torch state.\n */\nexport function toggleTorchButtonStatus(options = {}) {\n  const defaults = {\n    el: document.getElementById('torchButton'),\n    isTorchOn: false\n  };\n  const { el, isTorchOn } = { ...defaults, ...options };\n  const iconPaths = el.querySelectorAll('svg path');\n\n  if (iconPaths.length !== 2) {\n    return;\n  }\n\n  iconPaths[0].style.display = isTorchOn ? 'none' : 'block';\n  iconPaths[1].style.display = isTorchOn ? 'block' : 'none';\n  el.setAttribute('aria-label', `Turn ${isTorchOn ? 'off' : 'on'} flash`);\n}\n","import { clamp } from '../utils/clamp.js';\n\nconst COMPONENT_NAME = 'video-capture';\n\nconst styles = /* css */ `\n  :host { display: block; box-sizing: border-box; }\n  :host *, :host *::before, :host *::after { box-sizing: inherit;}\n  :host([hidden]), [hidden], ::slotted([hidden]) { display: none; }\n  video { display: block; }\n  #output:empty { display: none; }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n  <video part=\"video\" playsinline></video>\n  <div part=\"actions-container\"><slot name=\"actions\"></slot></div>\n  <slot></slot>\n`;\n\nclass VideoCapture extends HTMLElement {\n  #supportedConstraints = {};\n  #stream = null;\n  #videoElement = null;\n\n  constructor() {\n    super();\n\n    this.#supportedConstraints = this.getSupportedConstraints();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n  }\n\n  static get observedAttributes() {\n    return ['no-image', 'pan', 'tilt', 'zoom', 'torch'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (!this.isConnected) {\n      return;\n    }\n\n    const trackCapabilities = this.getTrackCapabilities();\n\n    if (name === 'zoom' && oldValue !== newValue && 'zoom' in this.#supportedConstraints) {\n      const zoomInAllowedRange =\n        'zoom' in trackCapabilities && trackCapabilities.zoom?.min && trackCapabilities.zoom?.max\n          ? this.zoom >= trackCapabilities.zoom.min && this.zoom <= trackCapabilities.zoom.max\n          : false;\n\n      if (typeof this.zoom === 'number' && zoomInAllowedRange) {\n        this.#applyConstraint('zoom', this.zoom);\n      }\n    }\n\n    if (name === 'torch' && oldValue !== newValue && 'torch' in this.#supportedConstraints) {\n      this.#applyConstraint('torch', this.torch);\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  async connectedCallback() {\n    this.#upgradeProperty('autoPlay');\n    this.#upgradeProperty('facingMode');\n    this.#upgradeProperty('zoom');\n    this.#upgradeProperty('torch');\n\n    this.#videoElement = this.shadowRoot?.querySelector('video') || null;\n\n    this.#videoElement?.addEventListener('loadedmetadata', this.#onVideoLoadedMetaData);\n\n    if (!VideoCapture.isSupported()) {\n      return this.dispatchEvent(\n        new CustomEvent(`${COMPONENT_NAME}:error`, {\n          bubbles: true,\n          composed: true,\n          detail: {\n            error: {\n              name: 'NotSupportedError',\n              message: 'Not supported'\n            }\n          }\n        })\n      );\n    }\n\n    if (this.autoPlay) {\n      this.startVideoStream();\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.stopVideoStream();\n    this.#videoElement?.removeEventListener('loadedmetadata', this.#onVideoLoadedMetaData);\n  }\n\n  get autoPlay() {\n    return this.hasAttribute('auto-play');\n  }\n\n  set autoPlay(value) {\n    this.toggleAttribute('auto-play', !!value);\n  }\n\n  get facingMode() {\n    const value = this.getAttribute('facing-mode');\n\n    if (value !== 'user') {\n      return 'environment';\n    }\n\n    return value;\n  }\n\n  set facingMode(value) {\n    this.setAttribute('facing-mode', value);\n  }\n\n  get zoom() {\n    return Number(this.getAttribute('zoom')) || 1;\n  }\n\n  set zoom(value) {\n    this.setAttribute('zoom', value != null ? value.toString() : value);\n  }\n\n  get torch() {\n    return this.hasAttribute('torch');\n  }\n\n  set torch(value) {\n    this.toggleAttribute('torch', !!value);\n  }\n\n  get loading() {\n    return this.hasAttribute('loading');\n  }\n\n  /**\n   * Handles the loadedmetadata event of the video element.\n   *\n   * @param {Event} evt - The event object.\n   */\n  #onVideoLoadedMetaData = evt => {\n    const video = evt.target;\n\n    video\n      .play()\n      .then(() => {\n        this.dispatchEvent(\n          new CustomEvent(`${COMPONENT_NAME}:video-play`, {\n            bubbles: true,\n            composed: true,\n            detail: { video }\n          })\n        );\n      })\n      .catch(error => {\n        this.dispatchEvent(\n          new CustomEvent(`${COMPONENT_NAME}:error`, {\n            bubbles: true,\n            composed: true,\n            detail: { error }\n          })\n        );\n      })\n      .finally(() => {\n        this.removeAttribute('loading');\n      });\n  };\n\n  /**\n   * Applies a constraint to the video track.\n   *\n   * @param {string} constraint - The name of the constraint.\n   * @param {any} value - The value of the constraint.\n   */\n  #applyConstraint(constraint, value) {\n    if (!this.#stream) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n    const trackCapabilities = this.getTrackCapabilities();\n    const trackSettings = this.getTrackSettings();\n\n    const constraintValue =\n      constraint === 'pan' || constraint === 'tilt' || constraint === 'zoom'\n        ? clamp(\n            Number(value),\n            trackCapabilities[constraint]?.min || 1,\n            trackCapabilities[constraint]?.max || 1\n          )\n        : value;\n\n    if (constraint in trackSettings) {\n      track\n        .applyConstraints({\n          advanced: [{ [constraint]: constraintValue }]\n        })\n        .catch(() => {\n          // Fail silently...\n        });\n    }\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {string} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    if (Object.prototype.hasOwnProperty.call(this, prop)) {\n      const value = this[prop];\n      delete this[prop];\n      this[prop] = value;\n    }\n  }\n\n  /**\n   * Starts the video stream.\n   *\n   * @param {string} [videoInputId] - The video input device ID.\n   * @returns Promise<void>\n   */\n  async startVideoStream(videoInputId) {\n    if (!VideoCapture.isSupported() || this.#stream) {\n      return;\n    }\n\n    this.setAttribute('loading', '');\n\n    const constraints = {\n      video: {\n        facingMode: {\n          ideal: this.facingMode\n        },\n        pan: true,\n        tilt: true,\n        zoom: true,\n        torch: this.torch\n      },\n      audio: false\n    };\n\n    if (typeof videoInputId === 'string' && videoInputId.trim().length > 0) {\n      constraints.video.deviceId = { exact: videoInputId };\n    }\n\n    if (typeof this.cameraResolution === 'string' && this.cameraResolution.trim().length > 0) {\n      const [width = 0, height = 0] = this.cameraResolution.split('x').map(x => Number(x));\n\n      if (width > 0 && height > 0) {\n        constraints.video.width = width;\n        constraints.video.height = height;\n      }\n    }\n\n    try {\n      this.#stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n      if (this.#videoElement) {\n        this.#videoElement.srcObject = this.#stream;\n      }\n\n      this.#applyConstraint('pan', this.pan);\n      this.#applyConstraint('tilt', this.tilt);\n      this.#applyConstraint('zoom', this.zoom);\n    } catch (error) {\n      this.dispatchEvent(\n        new CustomEvent(`${COMPONENT_NAME}:error`, {\n          bubbles: true,\n          composed: true,\n          detail: { error }\n        })\n      );\n    } finally {\n      this.removeAttribute('loading');\n    }\n  }\n\n  /**\n   * Restarts the video stream.\n   *\n   * @param {string} [videoInputId] - The video input device ID.\n   */\n  restartVideoStream(videoInputId) {\n    if (this.#stream && this.#videoElement) {\n      this.stopVideoStream();\n    }\n\n    this.startVideoStream(videoInputId);\n  }\n\n  /**\n   * Stops the video stream.\n   */\n  stopVideoStream() {\n    if (!this.#videoElement || !this.#stream) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    track?.stop();\n    this.#videoElement.srcObject = null;\n    this.#stream = null;\n  }\n\n  /**\n   * Returns an object based on the `MediaTrackSupportedConstraints` dictionary,\n   * whose member fields each specify one ofthe constrainable properties the user agent understands.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaDevices/getSupportedConstraints\n   * @returns {MediaTrackSupportedConstraints | {}}\n   */\n  getSupportedConstraints() {\n    if (!VideoCapture.isSupported()) {\n      return {};\n    }\n\n    return navigator.mediaDevices.getSupportedConstraints() || {};\n  }\n\n  /**\n   * Returns a `MediaTrackCapabilities` object which specifies the values or range of values\n   * which each constrainable property, based upon the platform and user agent.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getCapabilities\n   * @returns {MediaTrackCapabilities | {}}\n   */\n  getTrackCapabilities() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getCapabilities === 'function') {\n      return track.getCapabilities() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Returns a `MediaTrackSettings` object containing the current values of each of\n   * the constrainable properties for the current MediaStreamTrack.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getSettings\n   * @returns {MediaTrackSettings | {}}\n   */\n  getTrackSettings() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getSettings === 'function') {\n      return track.getSettings() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Returns the available video input devices.\n   *\n   * @returns {Promise<MediaDeviceInfo[]>}\n   */\n  static async getVideoInputDevices() {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      return [];\n    }\n\n    const devices = (await navigator.mediaDevices.enumerateDevices()) || [];\n    return devices.filter(device => device.kind === 'videoinput' && !!device.deviceId);\n  }\n\n  /**\n   * Checks if the `MediaDevices.getUserMedia()` method is supported.\n   *\n   * @returns {boolean}\n   */\n  static isSupported() {\n    return Boolean(navigator.mediaDevices?.getUserMedia);\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='video-capture'] - The name of the custom element.\n   */\n  static defineCustomElement(elementName = COMPONENT_NAME) {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, VideoCapture);\n    }\n  }\n}\n\nexport { VideoCapture };\n","/**\n * Clamps number within the inclusive `min` and `max` bounds,\n * making sure it does not go beyond them on either side.\n * If `min` is greater than `max` the parameters are swapped to support inverted ranges.\n *\n * @param {number} value - The number to clamp.\n * @param {number} lower - The lower bound.\n * @param {number} upper - The upper bound.\n * @throws {TypeError} - If one or more of the arguments passed is not a number.\n * @returns {number} - The clamped number.\n * @example\n *\n * clamp(10, -5, 5);\n * // => 5\n *\n * clamp(-10, -5, 5);\n * // => -5\n *\n * clamp(-15, 0, 100);\n * // => 0\n *\n * clamp(120, 0, 100);\n * // => 100\n *\n * clamp(-5, NaN, 5); // If any of lower or upper bound are `NaN`, they will be converted to `0`.\n * // => 0\n *\n * clamp(120, 100, 0); // The order of lower and upper bounds is reversed (100 > 0)\n * // => 100\n */\nexport const clamp = (value, lower, upper) => {\n  if (Number.isNaN(lower)) {\n    lower = 0;\n  }\n\n  if (Number.isNaN(upper)) {\n    upper = 0;\n  }\n\n  return Math.min(Math.max(value, Math.min(lower, upper)), Math.max(lower, upper));\n};\n","import { ClipboardCopy } from '@georapbox/clipboard-copy-element/dist/clipboard-copy.js';\n\n/**\n * Extends the `ClipboardCopy` element to override the default `copy` and `success` slots,\n * in order to avoid repetition of the same markup throughout the application.\n * It also adds aditional properties and attributes, specific to the application.\n *\n * @class CustomClipboardCopy\n * @extends ClipboardCopy\n */\nclass CustomClipboardCopy extends ClipboardCopy {\n  constructor() {\n    super();\n\n    const copySlot = this.shadowRoot.querySelector('slot[name=\"copy\"]');\n    const successSlot = this.shadowRoot.querySelector('slot[name=\"success\"]');\n\n    copySlot.innerHTML = /* html */ `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n        <path d=\"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"/>\n        <path d=\"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"/>\n      </svg>\n      <span class=\"text\">Copy</span>\n    `;\n\n    successSlot.innerHTML = /* html */ `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n        <path fill-rule=\"evenodd\" d=\"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z\"/>\n        <path d=\"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"/>\n        <path d=\"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"/>\n      </svg>\n      <span class=\"text\">Copied!</span>\n    `;\n  }\n\n  static get observedAttributes() {\n    return [...super.observedAttributes, 'only-icon'];\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n\n    if (name === 'only-icon' && oldValue !== newValue) {\n      const copySlot = this.shadowRoot.querySelector('slot[name=\"copy\"]');\n      const successSlot = this.shadowRoot.querySelector('slot[name=\"success\"]');\n\n      const copyText = copySlot.querySelector('.text');\n      const successText = successSlot.querySelector('.text');\n\n      if (copyText) {\n        copyText.hidden = this.onlyIcon;\n      }\n\n      if (successText) {\n        successText.hidden = this.onlyIcon;\n      }\n    }\n  }\n\n  get onlyIcon() {\n    return this.hasAttribute('only-icon');\n  }\n\n  set onlyIcon(value) {\n    if (value) {\n      this.setAttribute('only-icon', '');\n    } else {\n      this.removeAttribute('only-icon');\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.#upgradeProperty('onlyIcon');\n\n    if (!this.hasAttribute('feedback-duration')) {\n      this.setAttribute('feedback-duration', '1500');\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {string} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    if (Object.prototype.hasOwnProperty.call(this, prop)) {\n      const value = this[prop];\n      delete this[prop];\n      this[prop] = value;\n    }\n  }\n\n  static defineCustomElement(elementName = 'custom-clipboard-copy') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, CustomClipboardCopy);\n    }\n  }\n}\n\nCustomClipboardCopy.defineCustomElement();\n","import { isWebShareSupported } from '@georapbox/web-share-element/dist/is-web-share-supported.js';\nimport { getSettings } from '../services/storage.js';\nimport { NO_BARCODE_DETECTED } from '../constants.js';\n\nconst styles = /* css */ `\n  :host {\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden],\n  ::slotted([hidden]) {\n    display: none !important;\n  }\n\n  .result {\n    position: relative;\n    width: 100%;\n    border: 1px solid var(--focus);\n    border-radius: 6px;\n    margin: 1.5rem 0 0 0;\n    padding: 1rem;\n    background-color: var(--background-alt);\n    text-align: center;\n  }\n\n  .result__item {\n    word-wrap: break-word;\n    word-break: break-word;\n  }\n\n  a.result__item {\n    color: var(--links);\n    text-decoration: none;\n  }\n\n  a.result__item:hover {\n    text-decoration: underline;\n  }\n\n  .result__item--no-barcode {\n    color: var(--error-color);\n  }\n\n  .result__actions {\n    display: flex;\n    align-items: center;\n    align-items: center;\n    justify-content: center;\n    gap: 0.75rem;\n  }\n\n  .result web-share button,\n  .result custom-clipboard-copy::part(button) {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.25rem;\n    margin: 0.75rem 0 0 0;\n    padding: 0.25rem;\n    background-color: transparent;\n    border: 0;\n    border-radius: var(--border-radius);\n    color: inherit;\n    line-height: 1;\n    font-family: inherit;\n    font-size: 0.9rem;\n    cursor: pointer;\n  }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n\n  <div class=\"result\">\n    <div class=\"result__actions\">\n      <custom-clipboard-copy></custom-clipboard-copy>\n\n      <web-share>\n        <button slot=\"button\" type=\"button\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n            <path d=\"M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z\"/>\n          </svg>\n          Share\n        </button>\n      </web-share>\n    </div>\n  </div>\n`;\n\nclass ScanResult extends HTMLElement {\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n  }\n\n  get value() {\n    return this.getAttribute('value');\n  }\n\n  set value(value) {\n    this.setAttribute('value', value);\n  }\n\n  static get observedAttributes() {\n    return ['value'];\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'value' && oldValue !== newValue) {\n      this.#handleValueChange(this.value);\n    }\n  }\n\n  connectedCallback() {\n    this.#upgradeProperty('value');\n\n    if (!isWebShareSupported()) {\n      const webShareEl = this.shadowRoot.querySelector('web-share');\n\n      if (webShareEl) {\n        webShareEl.hidden = true;\n      }\n    }\n  }\n\n  async #handleValueChange(value) {\n    const baseEl = this.shadowRoot.querySelector('.result');\n    const resultActionsEl = baseEl?.querySelector('.result__actions');\n    const oldResultItem = baseEl?.querySelector('.result__item');\n    let resultItem;\n\n    if (oldResultItem) {\n      oldResultItem.remove();\n    }\n\n    try {\n      const [, settings] = await getSettings();\n\n      new URL(value);\n      resultItem = document.createElement('a');\n      resultItem.href = value;\n      window.requestAnimationFrame(() => resultItem.focus());\n\n      if (!settings?.openWebPageSameTab) {\n        resultItem.setAttribute('target', '_blank');\n        resultItem.setAttribute('rel', 'noreferrer noopener');\n      }\n\n      if (settings?.openWebPage) {\n        resultItem.click();\n      }\n    } catch {\n      resultItem = document.createElement('span');\n    }\n\n    resultItem.className = 'result__item';\n    resultItem.classList.toggle('result__item--no-barcode', value === NO_BARCODE_DETECTED);\n    resultItem.textContent = value;\n\n    baseEl?.insertBefore(resultItem, resultActionsEl);\n\n    const isValidValue = value !== NO_BARCODE_DETECTED;\n    const clipboarCopyEl = baseEl?.querySelector('custom-clipboard-copy');\n    const webShareEl = baseEl?.querySelector('web-share');\n\n    if (clipboarCopyEl && isValidValue) {\n      clipboarCopyEl.setAttribute('value', value);\n      clipboarCopyEl.hidden = false;\n    } else {\n      clipboarCopyEl.hidden = true;\n      clipboarCopyEl.removeAttribute('value');\n    }\n\n    if (webShareEl && isWebShareSupported() && isValidValue) {\n      webShareEl.setAttribute('share-text', value);\n      webShareEl.hidden = false;\n    } else {\n      webShareEl.hidden = true;\n      webShareEl.removeAttribute('share-text');\n    }\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {string} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    const instance = this;\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  static defineCustomElement(elementName = 'scan-result') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, ScanResult);\n    }\n  }\n}\n\nScanResult.defineCustomElement();\n"],"names":[],"version":3,"file":"main.js.map"}